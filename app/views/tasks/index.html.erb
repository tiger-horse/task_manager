<%= render "shared/header" %>
<div class="main room-name mb-3 overflow-auto mt-3">
  
  <div class="room-name mb-3 text-center">
    <%= link_to "#{@room.name}詳細へ", room_path(@room.id),  class: "text-decoration-none text-white btn btn-secondary" %>
  </div>
  <div class="text-center d-flex justify-content-center p-2">
  <%= form_with model: [@room, @task], class: 'form', id: "form" do |f| %>
    <%= render 'shared/error_messages', model: f.object %>
    <div>
    <%= f.label :日付を選択, class: 'lavel' %>
    <%= f.date_field :start_time, class: 'form-control' %>
  </div>
  <div class="mt-3">
    <%= f.label :タスク名, class: 'lavel ' %>
    <%= f.text_field :task_name, class: 'form-control' %>
  </div>
    <div class="mt-3">
      <%= f.label :タスク詳細, class: 'lavel' %>
      <%= f.text_area :content, class: 'form-control' %>
    </div>
    <div class="mt-3">
    <%= f.submit '保存', id: "task_submit"%>
    </div>
  <% end %>
  
  </div>
      <div class="room m-auto w-75">
        <%= month_calendar events: @tasks do |date, tasks| %>
        <%= date.day %>
        <% tasks.each do |task| %>
        <ul class ="list-unstyled task_ul d-flex">
          <% if task.is_completed %>
            <li class="task_li task">
              <%= form_with url: complete_room_task_path(@room.id, task.id), method: :patch do |f| %>
                <%= f.submit "完" %>
              <% end %>
              <%= link_to task.task_name, room_task_path(@room.id, task.id), method: :get, class: "text-decoration-none text-body task_completed"  %>
            </li>
        <% else %>
              <li class="task_li">
              <%= form_with url: unfinished_room_task_path(@room.id, task.id), method: :patch do |f| %>
                <%= f.submit "未" %>
              <% end %>
              <%= link_to task.task_name, room_task_path(@room.id, task.id), method: :get, class: "text-decoration-none text-body task_completed"  %>
            </li>
        <% end %>
          </li>
        </ul>
  <% end %>
<% end %>
      </div>
       
</div>
<%= render "shared/footer" %>


